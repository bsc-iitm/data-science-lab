<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Module 10: Core Components of LangChain – LLMs, PromptTemplates, OutputParsers – Data Science Lab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../week-6/Module11.html" rel="next">
<link href="../week-6/Module9.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-1100dc645a9806080dc50effd6ccb0f7.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-5977e214c05d9207a6b9ecdb11453a52.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-1100dc645a9806080dc50effd6ccb0f7.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-f5b8582305394ab3d0231d2900294800.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-d99f1631218ff9e9c1793c24613d371a.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/bootstrap/bootstrap-f5b8582305394ab3d0231d2900294800.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    window.setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      window.setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    window.hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(darkModeDefault) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const darkModeDefault = false;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !window.hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
    };
    // Switch to dark mode if need be
    if (window.hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../week-6/index.html">Week 6</a></li><li class="breadcrumb-item"><a href="../week-6/Module10.html">Module 10: Core Components of LangChain – LLMs, PromptTemplates, OutputParsers</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../assets/iit_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../week-1/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week-1</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../week-1/module-1/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module-1- NumPy and Matplotlib</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-1/module-1/nb-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Vectors</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-1/module-1/nb-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Plotting Simple Curves</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-1/module-1/nb-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Matrices</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-1/module-1/nb-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sampling from Distributions, Bar Plots, Histograms and Scatter plots</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-1/module-1/nb-5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">NumPy Arrays</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-1/module-1/nb-6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Contour Plots, 3D Plots, Optimisation</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../week-6/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 6</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-6/Module1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 1: Introduction to Prompt Engineering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-6/Module2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 2: Techniques in Prompting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-6/Module3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 3: Applications of Prompt Engineering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-6/Module4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 4: Introduction to LLM Platforms</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-6/Module5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 5: Getting Started with OpenAI API</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-6/Module6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 6: Hands-on with OpenAI API</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-6/Module7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 7: Working with Text Completion in OpenAI</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-6/Module8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 8: Evaluating Prompt Quality and Output Reliability</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-6/Module9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 9: Introduction to LangChain</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-6/Module10.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Module 10: Core Components of LangChain – LLMs, PromptTemplates, OutputParsers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-6/Module11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 11: LangChain Chains – Sequential, SimpleSequentialChain, RouterChain</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-6/Module12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 12: LangChain Memory – Making LLMs Remember Context</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../week-6/Module13.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Module 13: PromptTemplates in Depth – Partial Templates, Nesting, Debugging</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#llms-language-model-wrappers" id="toc-llms-language-model-wrappers" class="nav-link active" data-scroll-target="#llms-language-model-wrappers">1. LLMs – Language Model Wrappers</a></li>
  <li><a href="#prompttemplate-modular-prompt-construction" id="toc-prompttemplate-modular-prompt-construction" class="nav-link" data-scroll-target="#prompttemplate-modular-prompt-construction">2. PromptTemplate – Modular Prompt Construction</a>
  <ul class="collapse">
  <li><a href="#example-creating-and-formatting-a-prompttemplate" id="toc-example-creating-and-formatting-a-prompttemplate" class="nav-link" data-scroll-target="#example-creating-and-formatting-a-prompttemplate">Example: Creating and Formatting a PromptTemplate</a></li>
  </ul></li>
  <li><a href="#outputparsers-making-model-responses-structured" id="toc-outputparsers-making-model-responses-structured" class="nav-link" data-scroll-target="#outputparsers-making-model-responses-structured">3. OutputParsers – Making Model Responses Structured</a>
  <ul class="collapse">
  <li><a href="#why-outputparsers" id="toc-why-outputparsers" class="nav-link" data-scroll-target="#why-outputparsers">Why OutputParsers?</a></li>
  <li><a href="#example-extracting-json-from-an-llm-response" id="toc-example-extracting-json-from-an-llm-response" class="nav-link" data-scroll-target="#example-extracting-json-from-an-llm-response">Example: Extracting JSON from an LLM Response</a></li>
  <li><a href="#using-all-three-together" id="toc-using-all-three-together" class="nav-link" data-scroll-target="#using-all-three-together">Using All Three Together</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul class="collapse"><li><a href="https://github.com/bsc-iitm/data-science-lab/edit/master/week-6/Module10.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/bsc-iitm/data-science-lab/issues/new" target="_blank" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/bsc-iitm/data-science-lab/blob/master/week-6/Module10.qmd" target="_blank" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div><div class="quarto-other-links"><h2>Other Links</h2><ul><li><a href="https://discourse.onlinedegree.iitm.ac.in/"><i class="bi bi-chat-square-dots-fill"></i>Discussion Forum</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../week-6/index.html">Week 6</a></li><li class="breadcrumb-item"><a href="../week-6/Module10.html">Module 10: Core Components of LangChain – LLMs, PromptTemplates, OutputParsers</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Module 10: Core Components of LangChain – LLMs, PromptTemplates, OutputParsers</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>This module dives into three foundational building blocks within the LangChain framework: <strong>LLMs (Language Model wrappers)</strong>, <strong>PromptTemplates</strong>, and <strong>OutputParsers</strong>. A solid understanding and mastery of these components are crucial for constructing robust, structured, and highly reusable language model applications and pipelines. They form the bedrock upon which more complex LangChain constructs (like Chains and Agents) are built.</p>
<hr>
<section id="llms-language-model-wrappers" class="level2">
<h2 class="anchored" data-anchor-id="llms-language-model-wrappers">1. LLMs – Language Model Wrappers</h2>
<p>At the heart of any LLM-powered application is, naturally, the <strong>Large Language Model</strong> itself. LangChain provides a sophisticated yet user-friendly interface to interact with various LLM providers, abstracting away the intricacies of their specific APIs. This means you can seamlessly switch between models from different vendors such as OpenAI, Cohere, Anthropic, Google (via <code>langchain-google-genai</code>), HuggingFace (via <code>langchain-huggingface</code>), and many others, often with minimal code changes.</p>
<p>LangChain categorizes LLM interfaces into two main types: * <strong><code>LLM</code>:</strong> For models that typically accept a string input and return a string completion (e.g., older OpenAI completion models like <code>text-davinci-003</code>). * <strong><code>ChatModel</code>:</strong> For models that accept a list of messages (representing a conversation history with roles like “user,” “assistant,” “system”) and return a message, designed for conversational interfaces (e.g., OpenAI’s GPT-3.5-turbo, GPT-4, Anthropic’s Claude). While the example below uses <code>LLM</code>, <code>ChatModel</code> is more common for modern conversational AI.</p>
<section id="example-using-openais-older-completion-model-with-langchain" class="level3">
<h3 class="anchored" data-anchor-id="example-using-openais-older-completion-model-with-langchain">Example: Using OpenAI’s older Completion Model with LangChain</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Note: For newer models like gpt-3.5-turbo or gpt-4, you would typically use ChatOpenAI</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="co"># from langchain_openai import ChatOpenAI</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="co"># llm = ChatOpenAI(model_name="gpt-3.5-turbo", temperature=0.7)</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># response = llm.invoke("Write a motivational quote.")</span></span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># This example uses the older LLM wrapper for text-davinci-003,</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co"># which is good for demonstrating the basic LLM interface.</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="im">from</span> langchain_openai <span class="im">import</span> OpenAI</span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="co"># Initialize the OpenAI LLM wrapper.</span></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="co"># model_name: Specifies which LLM to use. "text-davinci-003" is an older completion model.</span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="co"># temperature: Controls the creativity of the output. 0.0 means more deterministic, higher means more random/creative.</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>llm <span class="op">=</span> OpenAI(model_name<span class="op">=</span><span class="st">"text-davinci-003"</span>, temperature<span class="op">=</span><span class="fl">0.7</span>)</span>
<span id="cb1-14"><a href="#cb1-14"></a></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="co"># Make a call to the LLM with a simple string prompt.</span></span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="co"># For LLM wrappers, the .invoke() method is used for synchronous calls.</span></span>
<span id="cb1-17"><a href="#cb1-17"></a>response <span class="op">=</span> llm.invoke(<span class="st">"Write a motivational quote."</span>)</span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="bu">print</span>(response)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Key Takeaway
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The primary advantage here is abstraction. You don’t need to manually construct HTTP requests, handle API keys in headers, or parse raw JSON responses. LangChain’s LLM (or ChatModel) wrapper handles all these underlying complexities, providing a clean Pythonic interface. This means you can seamlessly switch between models and providers (e.g., from <code>OpenAI</code> to <code>Anthropic</code> or <code>HuggingFace</code>) by simply changing the import and the class instantiation, without altering your core application logic.</p>
</div>
</div>
</div>
</section>
</section>
<section id="prompttemplate-modular-prompt-construction" class="level1">
<h1>2. PromptTemplate – Modular Prompt Construction</h1>
<p>Hardcoding prompt strings directly into your code quickly becomes unmanageable as applications grow.<br>
Prompts often need to be <strong>dynamic</strong>, incorporating user inputs, retrieved data, or internal states.</p>
<p>This is where LangChain’s <code>PromptTemplate</code> comes into play. It enables you to <strong>template your prompts</strong>, defining a structure with <strong>placeholders (variables)</strong> that can be filled in at runtime.</p>
<hr>
<section id="example-creating-and-formatting-a-prompttemplate" class="level2">
<h2 class="anchored" data-anchor-id="example-creating-and-formatting-a-prompttemplate">Example: Creating and Formatting a PromptTemplate</h2>
<section id="python" class="level3">
<h3 class="anchored" data-anchor-id="python">Python</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="im">from</span> langchain.prompts <span class="im">import</span> PromptTemplate</span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co"># Define the template string with a placeholder using curly braces {}.</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co"># The variable name "product" is identified by LangChain.</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>template_string <span class="op">=</span> <span class="st">"What are some marketing strategies for a </span><span class="sc">{product}</span><span class="st">?"</span></span>
<span id="cb2-6"><a href="#cb2-6"></a></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="co"># Create a PromptTemplate instance.</span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="co"># input_variables: A list of strings corresponding to the placeholders in your template.</span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="co"># template: The actual template string.</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>template <span class="op">=</span> PromptTemplate(</span>
<span id="cb2-11"><a href="#cb2-11"></a>    input_variables<span class="op">=</span>[<span class="st">"product"</span>],</span>
<span id="cb2-12"><a href="#cb2-12"></a>    template<span class="op">=</span>template_string</span>
<span id="cb2-13"><a href="#cb2-13"></a>)</span>
<span id="cb2-14"><a href="#cb2-14"></a></span>
<span id="cb2-15"><a href="#cb2-15"></a>prompt <span class="op">=</span> template.<span class="bu">format</span>(product<span class="op">=</span><span class="st">"fitness app"</span>)</span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="bu">print</span>(prompt)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><code>PromptTemplate</code> does more than just f-strings. It handles multiple input variables, can manage different types of prompts (e.g., ChatPromptTemplate for message-based LLMs), and ensures your prompts are well-structured and reusable across different parts of your application or even different projects.</p>
</div>
</div>
</div>
</section>
<section id="benefits-of-prompttemplate" class="level3">
<h3 class="anchored" data-anchor-id="benefits-of-prompttemplate">Benefits of PromptTemplate:</h3>
<ul>
<li>Reusable and readable</li>
<li>Parameterized with inputs</li>
<li>Easier to maintain and debug</li>
<li>Version Control Friendly</li>
</ul>
<hr>
</section>
</section>
</section>
<section id="outputparsers-making-model-responses-structured" class="level1">
<h1>3. OutputParsers – Making Model Responses Structured</h1>
<p>Large Language Models fundamentally generate <strong>plain text strings</strong>.<br>
While this is versatile, in many real-world applications, you don’t just want raw text;<br>
you need to extract <strong>structured information</strong> from the LLM’s response.</p>
<p>For example, you might want to retrieve: - a <strong>JSON object</strong> - a <strong>Python list</strong> - a <strong>specific number</strong> - or a <strong>boolean value</strong></p>
<hr>
<section id="why-outputparsers" class="level2">
<h2 class="anchored" data-anchor-id="why-outputparsers">Why OutputParsers?</h2>
<p><code>OutputParsers</code> in LangChain are designed precisely for this purpose.<br>
They take the <strong>raw text output</strong> from an LLM and <strong>transform it into a desired data structure</strong>.</p>
<p>This is crucial for: - Integrating LLM outputs into <strong>application logic</strong> - Storing results in <strong>databases</strong> - Passing structured data to <strong>external services</strong></p>
<hr>
</section>
<section id="example-extracting-json-from-an-llm-response" class="level2">
<h2 class="anchored" data-anchor-id="example-extracting-json-from-an-llm-response">Example: Extracting JSON from an LLM Response</h2>
<p>This example demonstrates how to set up an <code>OutputParser</code> to expect a structured JSON response.</p>
<blockquote class="blockquote">
<p><strong>Key Insight</strong>:<br>
You must tell <strong>both</strong> the OutputParser <strong>how to parse</strong>, and the <strong>LLM what format</strong> to output.<br>
The <code>format_instructions</code> generated by the parser are vital for <strong>guiding the LLM</strong>.</p>
</blockquote>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="im">from</span> langchain.output_parsers <span class="im">import</span> StructuredOutputParser, ResponseSchema</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="im">from</span> langchain_openai <span class="im">import</span> OpenAI <span class="co"># For LLM interaction</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="im">from</span> langchain.prompts <span class="im">import</span> PromptTemplate</span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="im">from</span> langchain.chains <span class="im">import</span> LLMChain</span>
<span id="cb3-5"><a href="#cb3-5"></a><span class="im">import</span> json <span class="co"># For pretty printing the output</span></span>
<span id="cb3-6"><a href="#cb3-6"></a></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co"># 1. Define the desired schema for the structured output.</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co"># Each ResponseSchema defines a key (name) and a description (to guide the LLM).</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>response_schemas <span class="op">=</span> [</span>
<span id="cb3-10"><a href="#cb3-10"></a>    ResponseSchema(name<span class="op">=</span><span class="st">"headline"</span>, description<span class="op">=</span><span class="st">"The main headline of the news article summary"</span>),</span>
<span id="cb3-11"><a href="#cb3-11"></a>    ResponseSchema(name<span class="op">=</span><span class="st">"summary"</span>, description<span class="op">=</span><span class="st">"A concise 2-sentence summary of the news article"</span>),</span>
<span id="cb3-12"><a href="#cb3-12"></a>    ResponseSchema(name<span class="op">=</span><span class="st">"keywords"</span>, description<span class="op">=</span><span class="st">"A comma-separated list of 3-5 keywords related to the article"</span>)</span>
<span id="cb3-13"><a href="#cb3-13"></a>]</span>
<span id="cb3-14"><a href="#cb3-14"></a></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="co"># 2. Create a StructuredOutputParser from the defined schema.</span></span>
<span id="cb3-16"><a href="#cb3-16"></a>parser <span class="op">=</span> StructuredOutputParser.from_response_schemas(response_schemas)</span>
<span id="cb3-17"><a href="#cb3-17"></a></span>
<span id="cb3-18"><a href="#cb3-18"></a><span class="co"># 3. Get the formatting instructions.</span></span>
<span id="cb3-19"><a href="#cb3-19"></a><span class="co"># These instructions tell the LLM exactly how to format its output</span></span>
<span id="cb3-20"><a href="#cb3-20"></a><span class="co"># so that the parser can successfully read it.</span></span>
<span id="cb3-21"><a href="#cb3-21"></a>format_instructions <span class="op">=</span> parser.get_format_instructions()</span>
<span id="cb3-22"><a href="#cb3-22"></a></span>
<span id="cb3-23"><a href="#cb3-23"></a><span class="bu">print</span>(<span class="st">"--- Format instructions to insert in your prompt ---"</span>)</span>
<span id="cb3-24"><a href="#cb3-24"></a><span class="bu">print</span>(format_instructions)</span>
<span id="cb3-25"><a href="#cb3-25"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span><span class="op">*</span><span class="dv">50</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb3-26"><a href="#cb3-26"></a></span>
<span id="cb3-27"><a href="#cb3-27"></a><span class="co"># Now, let's use this with an LLM and PromptTemplate</span></span>
<span id="cb3-28"><a href="#cb3-28"></a></span>
<span id="cb3-29"><a href="#cb3-29"></a><span class="co"># News article to summarize</span></span>
<span id="cb3-30"><a href="#cb3-30"></a>article_text <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb3-31"><a href="#cb3-31"></a><span class="st">Recent studies have confirmed that climate change is accelerating, with global temperatures continuing to rise. Scientists emphasize the urgent need for reducing greenhouse gas emissions. Renewable energy sources are becoming increasingly viable alternatives to fossil fuels. The latest IPCC report highlights the irreversible impacts already in motion and stresses immediate, ambitious action.</span></span>
<span id="cb3-32"><a href="#cb3-32"></a><span class="st">"""</span></span>
<span id="cb3-33"><a href="#cb3-33"></a></span>
<span id="cb3-34"><a href="#cb3-34"></a><span class="co"># Create a PromptTemplate that includes the format instructions</span></span>
<span id="cb3-35"><a href="#cb3-35"></a><span class="co"># It's crucial that the prompt explicitly asks the LLM to adhere to the format.</span></span>
<span id="cb3-36"><a href="#cb3-36"></a>prompt_template_string <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb3-37"><a href="#cb3-37"></a><span class="st">You are a news summarizer. Summarize the following article and extract key information in JSON format.</span></span>
<span id="cb3-38"><a href="#cb3-38"></a><span class="sc">{format_instructions}</span></span>
<span id="cb3-39"><a href="#cb3-39"></a><span class="st">Article:</span></span>
<span id="cb3-40"><a href="#cb3-40"></a><span class="sc">{article}</span></span>
<span id="cb3-41"><a href="#cb3-41"></a><span class="st">"""</span></span>
<span id="cb3-42"><a href="#cb3-42"></a></span>
<span id="cb3-43"><a href="#cb3-43"></a>prompt <span class="op">=</span> PromptTemplate(</span>
<span id="cb3-44"><a href="#cb3-44"></a>    input_variables<span class="op">=</span>[<span class="st">"article"</span>],</span>
<span id="cb3-45"><a href="#cb3-45"></a>    partial_variables<span class="op">=</span>{<span class="st">"format_instructions"</span>: format_instructions}, <span class="co"># Partial variable for fixed instructions</span></span>
<span id="cb3-46"><a href="#cb3-46"></a>    template<span class="op">=</span>prompt_template_string</span>
<span id="cb3-47"><a href="#cb3-47"></a>)</span>
<span id="cb3-48"><a href="#cb3-48"></a></span>
<span id="cb3-49"><a href="#cb3-49"></a><span class="co"># Initialize the LLM (using a chat model like gpt-3.5-turbo is recommended for structured output)</span></span>
<span id="cb3-50"><a href="#cb3-50"></a>llm <span class="op">=</span> OpenAI(temperature<span class="op">=</span><span class="dv">0</span>) <span class="co"># Set temperature to 0 for more deterministic output</span></span>
<span id="cb3-51"><a href="#cb3-51"></a></span>
<span id="cb3-52"><a href="#cb3-52"></a><span class="co"># Create an LLMChain to combine the prompt and LLM</span></span>
<span id="cb3-53"><a href="#cb3-53"></a>chain <span class="op">=</span> LLMChain(llm<span class="op">=</span>llm, prompt<span class="op">=</span>prompt)</span>
<span id="cb3-54"><a href="#cb3-54"></a></span>
<span id="cb3-55"><a href="#cb3-55"></a><span class="co"># Run the chain to get the raw text output from the LLM</span></span>
<span id="cb3-56"><a href="#cb3-56"></a>llm_raw_output <span class="op">=</span> chain.run(article<span class="op">=</span>article_text)</span>
<span id="cb3-57"><a href="#cb3-57"></a><span class="bu">print</span>(<span class="st">"--- Raw LLM Output (text string) ---"</span>)</span>
<span id="cb3-58"><a href="#cb3-58"></a><span class="bu">print</span>(llm_raw_output)</span>
<span id="cb3-59"><a href="#cb3-59"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span> <span class="op">+</span> <span class="st">"="</span><span class="op">*</span><span class="dv">50</span> <span class="op">+</span> <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)</span>
<span id="cb3-60"><a href="#cb3-60"></a></span>
<span id="cb3-61"><a href="#cb3-61"></a><span class="co"># Use the parser to transform the raw text output into a structured dictionary</span></span>
<span id="cb3-62"><a href="#cb3-62"></a><span class="cf">try</span>:</span>
<span id="cb3-63"><a href="#cb3-63"></a>    parsed_output <span class="op">=</span> parser.parse(llm_raw_output)</span>
<span id="cb3-64"><a href="#cb3-64"></a>    <span class="bu">print</span>(<span class="st">"--- Parsed Output (Python Dictionary) ---"</span>)</span>
<span id="cb3-65"><a href="#cb3-65"></a>    <span class="bu">print</span>(json.dumps(parsed_output, indent<span class="op">=</span><span class="dv">2</span>))</span>
<span id="cb3-66"><a href="#cb3-66"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb3-67"><a href="#cb3-67"></a>    <span class="bu">print</span>(<span class="ss">f"Error parsing output: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb3-68"><a href="#cb3-68"></a>    <span class="bu">print</span>(<span class="st">"The LLM might not have followed the format instructions precisely."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="using-all-three-together" class="level2">
<h2 class="anchored" data-anchor-id="using-all-three-together">Using All Three Together</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a><span class="im">from</span> langchain.llms <span class="im">import</span> OpenAI</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="im">from</span> langchain.prompts <span class="im">import</span> PromptTemplate</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="im">from</span> langchain.chains <span class="im">import</span> LLMChain</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co"># Step 1: Prompt Template</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>prompt <span class="op">=</span> PromptTemplate(</span>
<span id="cb4-7"><a href="#cb4-7"></a>    input_variables<span class="op">=</span>[<span class="st">"topic"</span>],</span>
<span id="cb4-8"><a href="#cb4-8"></a>    template<span class="op">=</span><span class="st">"Explain the concept of </span><span class="sc">{topic}</span><span class="st"> in simple terms."</span></span>
<span id="cb4-9"><a href="#cb4-9"></a>)</span>
<span id="cb4-10"><a href="#cb4-10"></a></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co"># Step 2: LLM</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>llm <span class="op">=</span> OpenAI(temperature<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb4-13"><a href="#cb4-13"></a></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="co"># Step 3: Chain</span></span>
<span id="cb4-15"><a href="#cb4-15"></a>chain <span class="op">=</span> LLMChain(llm<span class="op">=</span>llm, prompt<span class="op">=</span>prompt)</span>
<span id="cb4-16"><a href="#cb4-16"></a></span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co"># Run</span></span>
<span id="cb4-18"><a href="#cb4-18"></a>response <span class="op">=</span> chain.run(<span class="st">"blockchain"</span>)</span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="bu">print</span>(response)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<ul>
<li><code>LLM</code>: Connect to a language model.</li>
<li><code>PromptTemplate</code>: Build clean, reusable prompts.</li>
<li><code>OutputParser</code>: Convert raw LLM responses into structured data.</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    window.setColorSchemeToggle(window.hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/bsc-iitm\.github\.io\/data-science-lab\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../week-6/Module9.html" class="pagination-link" aria-label="Module 9: Introduction to LangChain">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Module 9: Introduction to LangChain</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../week-6/Module11.html" class="pagination-link" aria-label="Module 11: LangChain Chains – Sequential, SimpleSequentialChain, RouterChain">
        <span class="nav-page-text">Module 11: LangChain Chains – Sequential, SimpleSequentialChain, RouterChain</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2025 @ IIT Madras</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/bsc-iitm/data-science-lab/edit/master/week-6/Module10.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/bsc-iitm/data-science-lab/issues/new" target="_blank" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/bsc-iitm/data-science-lab/blob/master/week-6/Module10.qmd" target="_blank" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>