<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Module 9: Introduction to LangChain – Data Science Lab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-4a990d8dcb58f517c7c86712b8f2ac7c.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-46f4cc9626f044588a66931b604fc9c8.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-4a990d8dcb58f517c7c86712b8f2ac7c.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-f5b8582305394ab3d0231d2900294800.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-d99f1631218ff9e9c1793c24613d371a.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/bootstrap/bootstrap-f5b8582305394ab3d0231d2900294800.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Module 9: Introduction to LangChain</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../index.html" class="sidebar-logo-link">
      <img src="../assets/iit_logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Science Lab</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Weeks</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 1</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
 <span class="menu-text">week-1/*.{ipynb,qmd,md}</span>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 2</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
 <span class="menu-text">week-2/*.{ipynb,qmd,md}</span>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 3</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
 <span class="menu-text">week-3/*.{ipynb,qmd,md}</span>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 4</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
 <span class="menu-text">week-4/*.{ipynb,qmd,md}</span>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 5</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
 <span class="menu-text">week-5/*.{ipynb,qmd,md}</span>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 6</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
 <span class="menu-text">week-6/*.{ipynb,qmd,md}</span>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 7</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
 <span class="menu-text">week-7/*.{ipynb,qmd,md}</span>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false">
 <span class="menu-text">Week 10</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
 <span class="menu-text">week-10/*.{ipynb,qmd,md}</span>
  </li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#why-do-we-need-langchain" id="toc-why-do-we-need-langchain" class="nav-link active" data-scroll-target="#why-do-we-need-langchain">Why Do We Need LangChain?</a></li>
  <li><a href="#use-cases-of-langchain" id="toc-use-cases-of-langchain" class="nav-link" data-scroll-target="#use-cases-of-langchain">Use Cases of LangChain</a></li>
  <li><a href="#core-ideas-behind-langchain" id="toc-core-ideas-behind-langchain" class="nav-link" data-scroll-target="#core-ideas-behind-langchain">Core Ideas Behind LangChain</a></li>
  <li><a href="#langchain-ecosystem" id="toc-langchain-ecosystem" class="nav-link" data-scroll-target="#langchain-ecosystem">LangChain Ecosystem</a></li>
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation">Installation</a></li>
  <li><a href="#setting-up-openai-api-key" id="toc-setting-up-openai-api-key" class="nav-link" data-scroll-target="#setting-up-openai-api-key">Setting Up OpenAI API Key</a></li>
  <li><a href="#langchain-vs-raw-openai-usage" id="toc-langchain-vs-raw-openai-usage" class="nav-link" data-scroll-target="#langchain-vs-raw-openai-usage">LangChain vs Raw OpenAI Usage</a></li>
  <li><a href="#typical-langchain-app-structure" id="toc-typical-langchain-app-structure" class="nav-link" data-scroll-target="#typical-langchain-app-structure">Typical LangChain App Structure</a>
  <ul class="collapse">
  <li><a href="#langchain-in-production" id="toc-langchain-in-production" class="nav-link" data-scroll-target="#langchain-in-production">LangChain in Production</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul class="collapse"><li><a href="https://github.com/bsc-iitm/data-science-lab/edit/master/week-6/Module9.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/bsc-iitm/data-science-lab/issues/new" target="_blank" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/bsc-iitm/data-science-lab/blob/master/week-6/Module9.qmd" target="_blank" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div><div class="quarto-other-links"><h2>Other Links</h2><ul><li><a href="https://discourse.onlinedegree.iitm.ac.in/"><i class="bi bi-chat-square-dots-fill"></i>Discussion Forum</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Module 9: Introduction to LangChain</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>LangChain is an innovative, open-source <strong>framework</strong> meticulously designed to simplify and accelerate the development of applications that harness the power of large language models (LLMs). Think of LLMs as the “brains” of your AI applications, encompassing models like OpenAI’s ChatGPT and GPT-4, Anthropic’s Claude, Google’s Gemini, and many others. LangChain acts as the <strong>orchestration layer</strong>, enabling the flexible and sophisticated integration of LLMs with crucial components such as external memory systems, diverse APIs, specialized tools, intelligent agents, and robust vector stores. It moves beyond simple prompt-and-response, allowing developers to build complex, intelligent systems.</p>
<hr>
<section id="why-do-we-need-langchain" class="level2">
<h2 class="anchored" data-anchor-id="why-do-we-need-langchain">Why Do We Need LangChain?</h2>
<p>Building real-world applications with LLMs presents a unique set of challenges that go beyond merely sending a prompt to an API. Developers often encounter hurdles such as:</p>
<ul>
<li><strong>How to manage multi-step reasoning?</strong> Imagine an LLM application that needs to first search for information, then summarize it, and finally answer a user’s question based on that summary. This requires a sequence of actions and decisions, which is complex to manage with raw API calls.</li>
<li><strong>How to keep conversation history or memory?</strong> LLMs are inherently stateless; they don’t remember past interactions in a conversation. For truly conversational chatbots or agents, maintaining context (what was said before) is paramount.</li>
<li><strong>How to call external tools or databases?</strong> LLMs are powerful at language understanding and generation but lack real-time access to current events, proprietary data, or the ability to perform calculations precisely. Connecting them to external tools (like search engines, calculators, or databases) is essential for grounded, factual, and dynamic responses.</li>
<li><strong>How to structure and reuse prompts easily?</strong> As applications grow, managing numerous prompt strings for different tasks, ensuring consistency, and adding dynamic inputs can become cumbersome and error-prone.</li>
</ul>
<p>LangChain elegantly addresses these challenges by offering a <strong>modular, extensible framework</strong>. It provides the architectural scaffolding to connect all these disparate components—LLMs, memory, tools, and data—into powerful, coherent, and maintainable <strong>pipelines</strong>.</p>
<hr>
</section>
<section id="use-cases-of-langchain" class="level2">
<h2 class="anchored" data-anchor-id="use-cases-of-langchain">Use Cases of LangChain</h2>
<p>LangChain’s modularity and comprehensive features make it suitable for building a wide array of sophisticated LLM-powered applications:</p>
<ul>
<li><strong>Conversational Chatbots with Memory:</strong> Develop chatbots that remember past interactions, enabling natural and context-aware dialogues. This is crucial for customer service, virtual assistants, and interactive learning platforms.</li>
<li><strong>Intelligent Agents that Take Actions:</strong> Create autonomous agents that can reason about a task, decide which tools to use, execute those tools (like Browse the web, searching databases, performing calculations), and then respond or take further actions based on the results. This is a significant step towards more independent AI systems.</li>
<li><strong>RAG (Retrieval-Augmented Generation) Systems:</strong> Build applications that retrieve relevant information from external data sources (e.g., documents, databases) before generating a response. This grounds the LLM’s output in factual, up-to-date, or proprietary data, significantly reducing hallucinations and increasing accuracy.</li>
<li><strong>Document Q&amp;A and Search Apps:</strong> Power applications that allow users to ask questions about large corpuses of documents and get precise, contextually relevant answers, effectively turning unstructured data into an accessible knowledge base.</li>
<li><strong>Custom Workflows Powered by LLMs:</strong> Design bespoke multi-step processes where LLMs handle natural language understanding and generation at various stages, orchestrating complex operations.</li>
</ul>
<hr>
</section>
<section id="core-ideas-behind-langchain" class="level2">
<h2 class="anchored" data-anchor-id="core-ideas-behind-langchain">Core Ideas Behind LangChain</h2>
<p>LangChain’s philosophy revolves around breaking down complex LLM applications into fundamental, interchangeable <strong>components</strong>. This architectural approach promotes the creation of modular, testable, and scalable systems, allowing developers to build sophisticated applications without reinventing the wheel for common functionalities.</p>
<section id="prompttemplate" class="level3">
<h3 class="anchored" data-anchor-id="prompttemplate">1. <strong>PromptTemplate</strong></h3>
<ul>
<li><strong>Concept:</strong> A <code>PromptTemplate</code> is a blueprint for generating prompts. Instead of hardcoding prompt strings, you define a template with placeholders (variables) that can be dynamically filled in.</li>
<li><strong>Purpose:</strong> Helps you define structured prompts with dynamic inputs. This significantly improves the <strong>maintainability</strong> and <strong>readability</strong> of your prompt strings, especially when dealing with multiple inputs or varying scenarios. It ensures consistency and simplifies prompt engineering.</li>
<li><strong>Analogy:</strong> Think of it like a mail merge template. You define the structure of your letter once, and then you can easily insert different names, addresses, or dates for each recipient.</li>
</ul>
</section>
<section id="llm-wrappers" class="level3">
<h3 class="anchored" data-anchor-id="llm-wrappers">2. <strong>LLM Wrappers</strong></h3>
<ul>
<li><strong>Concept:</strong> LangChain provides a <strong>unified interface</strong> (<code>LLM</code> or <code>ChatModel</code> classes) to interact with various LLMs from different providers.</li>
<li><strong>Purpose:</strong> You just choose the model (e.g., OpenAI’s GPT-4, Anthropic’s Claude, Google’s Gemini, Hugging Face models), and LangChain handles the underlying API calls, authentication, and request/response formatting complexities. This abstracts away provider-specific details, making it easy to swap models or integrate new ones without rewriting your application logic.</li>
<li><strong>Analogy:</strong> Imagine a universal remote control for all your smart devices. You don’t need to learn each device’s specific commands; the remote handles the translation.</li>
</ul>
</section>
<section id="chains" class="level3">
<h3 class="anchored" data-anchor-id="chains">3. <strong>Chains</strong></h3>
<ul>
<li><strong>Concept:</strong> Chains are sequences of <strong>calls or logic steps</strong>. They allow you to combine LLMs with other components (like prompt templates, other chains, or tools) in a predefined order to accomplish a more complex task.</li>
<li><strong>Purpose:</strong> They provide a structured way to execute multi-step operations.</li>
<li><strong>Examples:</strong>
<ul>
<li><code>LLMChain</code>: The simplest chain, combining a <code>PromptTemplate</code> with an <code>LLM</code>. It takes input variables, formats them into a prompt, passes it to the LLM, and returns the LLM’s output.</li>
<li><code>SimpleSequentialChain</code>: Executes a series of chains in a predefined order, where the output of one chain becomes the input for the next. Ideal for linear workflows.</li>
<li><code>RouterChain</code>: Allows dynamic routing of input to different sub-chains based on the input’s content or intent. This enables more complex, conditional workflows.</li>
</ul></li>
<li><strong>Analogy:</strong> A chain is like an assembly line in a factory. Each station (component) performs a specific task, and the output of one station feeds into the next, creating a finished product.</li>
</ul>
</section>
<section id="memory" class="level3">
<h3 class="anchored" data-anchor-id="memory">4. <strong>Memory</strong></h3>
<ul>
<li><strong>Concept:</strong> Memory components allow LLM applications to <strong>remember previous interactions</strong> within a conversation.</li>
<li><strong>Purpose:</strong> Built-in memory types track previous conversations, enabling the LLM to maintain context and generate coherent, relevant responses over multiple turns. Without memory, each LLM call is stateless, meaning it has no recollection of what was said moments before.</li>
<li><strong>Examples:</strong>
<ul>
<li><code>ConversationBufferMemory</code>: Stores all previous messages in a buffer and passes them directly to the LLM.</li>
<li><code>EntityMemory</code>: Focuses on remembering specific entities (people, places, things) and their attributes mentioned during the conversation.</li>
</ul></li>
<li><strong>Analogy:</strong> Memory for an LLM is like a human’s short-term memory during a conversation, allowing us to refer back to earlier points and maintain flow.</li>
</ul>
</section>
<section id="agents-tools" class="level3">
<h3 class="anchored" data-anchor-id="agents-tools">5. <strong>Agents &amp; Tools</strong></h3>
<ul>
<li><strong>Concept:</strong> This is where LLMs move from being just text generators to active decision-makers.
<ul>
<li><strong>Agents:</strong> Empower LLMs to <strong>reason</strong> about a problem and <strong>decide actions</strong> to take based on the available tools. They can observe the environment, think about what to do next, execute an action, and repeat.</li>
<li><strong>Tools:</strong> Are functions that agents can use. These can be external APIs, a calculator, a search engine, a custom database query function, or even another LLM.</li>
</ul></li>
<li><strong>Purpose:</strong> Agents allow LLMs to go beyond their pre-trained knowledge, interact with the real world (via tools), and perform complex, dynamic tasks requiring external information or computation.</li>
<li><strong>Analogy:</strong> An agent is like a project manager, and tools are the specialized workers they can delegate tasks to. The project manager (agent) decides who (which tool) does what, when, and how, to achieve the overall goal.</li>
</ul>
</section>
<section id="retrievers-vector-stores" class="level3">
<h3 class="anchored" data-anchor-id="retrievers-vector-stores">6. <strong>Retrievers &amp; Vector Stores</strong></h3>
<ul>
<li><strong>Concept:</strong> These components are central to building <strong>Retrieval-Augmented Generation (RAG)</strong> systems.
<ul>
<li><strong>Retrievers:</strong> Are interfaces for fetching relevant documents or data from a <strong>storage location</strong>. They are designed to retrieve information based on a query, often using semantic similarity.</li>
<li><strong>Vector Stores:</strong> Are specialized databases that store numerical representations (embeddings) of text. They enable <strong>semantic search</strong>, allowing you to find text chunks that are conceptually similar to your query, even if they don’t share exact keywords.</li>
</ul></li>
<li><strong>Purpose:</strong> They enable LLMs to access and utilize external, up-to-date, or proprietary information that wasn’t part of their original training data. This is crucial for reducing hallucinations, providing factual answers, and answering questions about specific documents.</li>
<li><strong>Supports:</strong> LangChain provides integrations with many popular vector databases like Chroma, FAISS, Pinecone, Weaviate, Milvus, and others.</li>
<li><strong>Analogy:</strong> A retriever and vector store combined are like a highly efficient, semantic library search system. When you ask a question, it quickly finds the most relevant books (documents) in the library (vector store) based on the meaning of your question, not just keywords.</li>
</ul>
<hr>
</section>
</section>
<section id="langchain-ecosystem" class="level2">
<h2 class="anchored" data-anchor-id="langchain-ecosystem">LangChain Ecosystem</h2>
<p>The LangChain ecosystem is strategically modularized to give developers flexibility and reduce dependency bloat. It’s primarily split into a few key packages:</p>
<ul>
<li><code>langchain-core</code>: This is the foundational package. It contains the <strong>base classes, fundamental logic, and core interfaces</strong> for all LangChain components. You’ll almost always need this.</li>
<li><code>langchain-community</code>: This package provides <strong>integrations with a wide array of third-party tools and services</strong>. This includes support for various LLM providers (beyond OpenAI), vector stores (like Chroma), data loaders, utilities for web scraping, and more. It’s separated so you only install the dependencies for the specific community integrations you use.</li>
<li><code>langchain-openai</code>: This is a specific integration package solely for <strong>OpenAI models and tools</strong>. It includes specialized wrappers and functionalities optimized for interacting with OpenAI’s API, including their chat models, embedding models, and tool-calling capabilities.</li>
</ul>
<p>You install them as needed, minimizing the overall footprint of your project’s dependencies.</p>
<hr>
</section>
<section id="installation" class="level2">
<h2 class="anchored" data-anchor-id="installation">Installation</h2>
<p>Basic installation:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="ex">pip</span> install langchain openai</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If using <code>.env</code> for API keys:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1"></a><span class="ex">pip</span> install python-dotenv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Extras:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="ex">pip</span> install chromadb faiss-cpu tiktoken</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
<section id="setting-up-openai-api-key" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-openai-api-key">Setting Up OpenAI API Key</h2>
<p>Create a <code>.env</code> file:</p>
<pre><code>OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxx</code></pre>
<p>In your code:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a><span class="im">import</span> os</span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="im">from</span> dotenv <span class="im">import</span> load_dotenv</span>
<span id="cb5-3"><a href="#cb5-3"></a></span>
<span id="cb5-4"><a href="#cb5-4"></a>load_dotenv()</span>
<span id="cb5-5"><a href="#cb5-5"></a>os.environ[<span class="st">"OPENAI_API_KEY"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-simple callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explanation
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><p><code>from langchain_openai import OpenAI</code> We import the specific wrapper for OpenAI’s LLMs from the <code>langchain_openai</code> package, reflecting the modular ecosystem.</p></li>
<li><p><code>llm = OpenAI(temperature=0.7)</code> We create an instance of the OpenAI LLM wrapper. You can pass various parameters here, like <code>temperature</code>, <code>model_name</code>, etc.</p></li>
<li><p><code>output = llm.invoke("Write a short poem about the moon.")</code> We call the LLM with our prompt. LangChain handles the underlying API request, sending your prompt to OpenAI’s servers, and receiving the generated text.<br>
The <code>.invoke()</code> method is the standard way to call an LLM (or a chain) for a single input.</p></li>
<li><p><code>print(output)</code> Prints the generated poem.</p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="langchain-vs-raw-openai-usage" class="level1">
<h1>LangChain vs Raw OpenAI Usage</h1>
<p>Understanding why LangChain is beneficial often comes down to comparing its capabilities against directly using the OpenAI API (or any other LLM provider’s API).</p>
<table class="caption-top table">
<colgroup>
<col style="width: 10%">
<col style="width: 41%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Feature</strong></th>
<th><strong>Raw OpenAI API</strong></th>
<th><strong>LangChain</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Prompt handling</strong></td>
<td>Manual string concatenation, often hardcoded.</td>
<td><code>PromptTemplate</code> for structured, reusable, and dynamic prompts.</td>
</tr>
<tr class="even">
<td><strong>Memory</strong></td>
<td>Not built-in; requires custom logic to store/retrieve chat history.</td>
<td>Built-in <code>ConversationBufferMemory</code>, <code>EntityMemory</code>, etc., simplifying context management.</td>
</tr>
<tr class="odd">
<td><strong>Chaining</strong></td>
<td>Manual logic to sequence multiple LLM calls or intermediate steps.</td>
<td>Built-in <code>Chain</code> types (<code>LLMChain</code>, <code>SequentialChain</code>, <code>RouterChain</code>) for structured workflows.</td>
</tr>
<tr class="even">
<td><strong>Tools/Agents</strong></td>
<td>Not available; requires extensive custom code to enable LLM to use external tools.</td>
<td>First-class support for <code>Agents</code> that can reason and utilize <code>Tools</code> (APIs, calculators, etc.).</td>
</tr>
<tr class="odd">
<td><strong>Retrieval</strong></td>
<td>Needs custom code for embedding, indexing, and retrieval.</td>
<td>Built-in <code>Retrievers</code> and Vector Store integrations (Chroma, Pinecone, etc.) for RAG applications.</td>
</tr>
<tr class="even">
<td><strong>Model Agnostic</strong></td>
<td>Provider-specific API calls.</td>
<td>Unified <code>LLM</code> and <code>ChatModel</code> interfaces across providers (OpenAI, Anthropic, HuggingFace, etc.).</td>
</tr>
<tr class="odd">
<td><strong>Observability</strong></td>
<td>Requires custom logging for tracing.</td>
<td>Integrations with tracing tools like <code>LangSmith</code> for debugging and monitoring.</td>
</tr>
<tr class="even">
<td><strong>Error Handling</strong></td>
<td>Must implement robust error handling for API failures.</td>
<td>Provides standardized error handling patterns within the framework.</td>
</tr>
</tbody>
</table>
<p>In essence, while the raw API gives you fine-grained control, LangChain provides a higher-level abstraction and pre-built components that significantly reduce boilerplate code and development time for complex LLM applications.</p>
</section>
<section id="typical-langchain-app-structure" class="level1">
<h1>Typical LangChain App Structure</h1>
<p>A well-structured LangChain application typically separates concerns into logical directories, promoting modularity and maintainability.<br>
While the exact structure can vary, a common layout might look like this:</p>
<pre><code>my-langchain-app/
├── .env                         # For storing sensitive API keys and environment variables
├── main.py                      # The main entry point of your application
├── prompts/                     # Directory for storing prompt templates
│   ├── qa_prompt.txt            # Example: A prompt template for a Q&amp;A system
│   └── summarizer_prompt.yaml   # Example: Another prompt in YAML format
├── chains/                      # Directory for defining custom chains
│   ├── summarizer_chain.py      # Example: A chain for document summarization
│   └── qa_chain.py              # Example: A chain for question answering
├── memory/                      # Directory for memory configurations (if complex)
│   └── conversation_buffer.py   # Example: Custom memory management setup
└── data/                        # Directory for local data or documents
    ├── docs/                    # Sub-directory for documents to be used in RAG
    │   ├── document1.txt
    │   └── document2.pdf
    └── embeddings/              # Sub-directory for storing pre-computed embeddings (optional)</code></pre>
<p>This structure makes it easier to <strong>navigate</strong>, <strong>manage</strong>, and <strong>scale</strong> your LangChain projects as they become more complex. |</p>
<section id="langchain-in-production" class="level2">
<h2 class="anchored" data-anchor-id="langchain-in-production">LangChain in Production</h2>
<p>LangChain can be integrated with:</p>
<ul>
<li><strong>Streamlit / Gradio</strong> for frontend</li>
<li><strong>FastAPI / Flask</strong> for APIs</li>
<li><strong>Docker</strong> for containerization</li>
<li><strong>Vector DBs</strong> like Pinecone or Chroma</li>
</ul>
<hr>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Choose LangChain when:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>You’re building a multi-step pipeline that involves sequential or complex reasoning (e.g., research, analysis, then synthesis).</li>
<li>You want to connect memory, external tools, APIs, databases, or web resources with your LLM.</li>
<li>You’re working with agents that need to make decisions and take actions autonomously.</li>
<li>You are developing Retrieval-Augmented Generation (RAG) systems to ground LLM responses in specific data.</li>
<li>You need model agnosticism and want the flexibility to easily swap between different LLM providers.</li>
<li>You aim for structured, reusable, and maintainable LLM application code.</li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Don’t use LangChain if:
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>You only need a single, straightforward prompt call to an LLM, without any complex chaining, memory, or tool integration. For very simple, one-off interactions, a direct API call might be sufficient and introduce less overhead.</li>
<li>You just want to experiment quickly with raw completions or basic playground-style interactions where the overhead of a framework isn’t beneficial.</li>
</ul>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/bsc-iitm\.github\.io\/data-science-lab\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2025 @ IIT Madras</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/bsc-iitm/data-science-lab/edit/master/week-6/Module9.qmd" target="_blank" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/bsc-iitm/data-science-lab/issues/new" target="_blank" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/bsc-iitm/data-science-lab/blob/master/week-6/Module9.qmd" target="_blank" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>